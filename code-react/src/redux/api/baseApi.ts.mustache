import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export interface HealthResponse {
  requestId: string;
  faults: null;
  response: {
    status: string;
    service: string;
    version: string;
    timestamp: string;
    build: {
      build: string;
      attempt: string;
      action: string;
      modifiedDate: string;
      sha: string;
    };
  };
}

export const baseApi = createApi({
  reducerPath: 'api',
  baseQuery: fetchBaseQuery({
    baseUrl: import.meta.env.VITE_API_BASE || 'http://localhost:8080',
  }),
  tagTypes: ['Health'],
  endpoints: (builder) => ({
    getHealth: builder.query<HealthResponse, void>({
      query: () => '/api/v1/public/health',
      providesTags: ['Health'],
    }),
  }),
});

export const { useGetHealthQuery } = baseApi;
