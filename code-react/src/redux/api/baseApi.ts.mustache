import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export interface HealthResponse {
  status: string;
  service: string;
  version: string;
  build: {
    'gh.build': string;
    'gh.attempt': string;
    'gh.action': string;
    'gh.modifiedDate': string;
    'gh.sha': string;
  };
}

export const baseApi = createApi({
  reducerPath: 'api',
  baseQuery: fetchBaseQuery({
    baseUrl: import.meta.env.VITE_API_BASE || 'http://localhost:8080',
  }),
  tagTypes: ['Health'],
  endpoints: (builder) => ({
    getHealth: builder.query<HealthResponse, void>({
      query: () => '/api/v1/public/health',
      providesTags: ['Health'],
    }),
  }),
});

export const { useGetHealthQuery } = baseApi;
