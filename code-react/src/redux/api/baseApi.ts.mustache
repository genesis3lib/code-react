import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

{{#hasBackend}}
export interface HealthResponse {
  requestId: string;
  faults: null;
  response: {
    status: string;
    service: string;
    version: string;
    timestamp: string;
    build: {
      build: string;
      attempt: string;
      action: string;
      modifiedDate: string;
      sha: string;
    };
  };
}

{{/hasBackend}}
export const baseApi = createApi({
  reducerPath: 'api',
  baseQuery: fetchBaseQuery({
    baseUrl: import.meta.env.VITE_API_BASE || 'http://localhost:8080',
  }),
{{#hasBackend}}
  tagTypes: ['Health'],
  endpoints: (builder) => ({
    getHealth: builder.query<HealthResponse, void>({
      query: () => '/api/v1/public/health',
      providesTags: ['Health'],
    }),
  }),
{{/hasBackend}}
{{^hasBackend}}
  tagTypes: [],
  endpoints: () => ({}),
{{/hasBackend}}
});

{{#hasBackend}}
export const { useGetHealthQuery } = baseApi;
{{/hasBackend}}
